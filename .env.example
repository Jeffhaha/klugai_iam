# =============================================================================
# 独立IAM认证授权服务 - 环境变量配置示例
# Independent IAM Authentication & Authorization Service - Environment Variables
# =============================================================================

# 复制此文件为 .env 并根据你的环境修改配置值
# Copy this file to .env and modify the configuration values for your environment

# =============================================================================
# 基础配置 / Basic Configuration
# =============================================================================

# 构建环境 / Build Environment
BUILD_ENV=production

# 日志级别 / Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# 时区配置 / Timezone Configuration
TZ=Asia/Shanghai

# =============================================================================
# 数据库配置 / Database Configuration
# =============================================================================

# PostgreSQL配置 / PostgreSQL Configuration
POSTGRES_PASSWORD=iam_secure_password_2024
POSTGRES_PORT=5432
DATABASE_POOL_SIZE=10
DATABASE_POOL_TIMEOUT=30

# Redis配置 / Redis Configuration  
REDIS_PASSWORD=redis_secure_password_2024
REDIS_PORT=6379
REDIS_MAX_CONNECTIONS=20

# =============================================================================
# 服务端口配置 / Service Port Configuration
# =============================================================================

# 认证服务 / Authentication Service
AUTH_SERVICE_PORT=8001
AUTH_METRICS_PORT=9001
AUTH_WORKERS=2

# 授权服务 / Authorization Service
AUTHZ_SERVICE_PORT=8002
AUTHZ_METRICS_PORT=9002
AUTHZ_WORKERS=2

# API网关 / API Gateway
GATEWAY_PORT=8000
GATEWAY_METRICS_PORT=9000
GATEWAY_WORKERS=3

# 前端服务 / Frontend Service
FRONTEND_PORT=3000

# =============================================================================
# JWT安全配置 / JWT Security Configuration
# =============================================================================

# JWT密钥 - 在生产环境中必须更改 / JWT Secret Key - MUST be changed in production
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production-2024-$(openssl rand -hex 32)

# JWT算法 / JWT Algorithm
JWT_ALGORITHM=HS256

# JWT过期时间（分钟）/ JWT Expiration (minutes)
JWT_EXPIRATION_MINUTES=60

# 刷新令牌过期时间（天）/ Refresh Token Expiration (days)
JWT_REFRESH_EXPIRATION_DAYS=30

# =============================================================================
# 安全配置 / Security Configuration
# =============================================================================

# 最大失败登录尝试次数 / Max Failed Login Attempts
SECURITY_MAX_FAILED_ATTEMPTS=5

# 账户锁定持续时间（分钟）/ Account Lockout Duration (minutes)
SECURITY_LOCKOUT_DURATION_MINUTES=15

# =============================================================================
# 缓存配置 / Cache Configuration
# =============================================================================

# 缓存TTL（秒）/ Cache TTL (seconds)
CACHE_TTL_SECONDS=300

# 缓存最大条目数 / Cache Max Size
CACHE_MAX_SIZE=1000

# =============================================================================
# 服务超时配置 / Service Timeout Configuration
# =============================================================================

# 服务超时时间（秒）/ Service Timeout (seconds)
SERVICE_TIMEOUT=30

# 连接超时时间（秒）/ Connection Timeout (seconds) 
CONNECTION_TIMEOUT=5

# =============================================================================
# 速率限制配置 / Rate Limiting Configuration
# =============================================================================

# 默认每分钟请求数 / Default Requests Per Minute
RATE_LIMITING_RPM=100

# 突发请求大小 / Burst Size
RATE_LIMITING_BURST=20

# =============================================================================
# CORS配置 / CORS Configuration
# =============================================================================

# 允许的源域名 / Allowed Origins
CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:5173,https://yourdomain.com

# =============================================================================
# 监控配置 / Monitoring Configuration
# =============================================================================

# Prometheus端口 / Prometheus Port
PROMETHEUS_PORT=9090

# Grafana配置 / Grafana Configuration
GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=grafana_secure_password_2024

# =============================================================================
# SSL/TLS配置 / SSL/TLS Configuration
# =============================================================================

# SSL证书路径 / SSL Certificate Path
SSL_CERT_PATH=/etc/ssl/certs/iam-service.crt
SSL_KEY_PATH=/etc/ssl/private/iam-service.key

# 启用HTTPS / Enable HTTPS
ENABLE_HTTPS=false

# SSL/TLS版本 / SSL/TLS Version
TLS_VERSION=1.2

# =============================================================================
# 备份配置 / Backup Configuration
# =============================================================================

# 数据库备份路径 / Database Backup Path
BACKUP_PATH=/backup

# 备份保留天数 / Backup Retention Days
BACKUP_RETENTION_DAYS=30

# 自动备份间隔（小时）/ Auto Backup Interval (hours)
AUTO_BACKUP_INTERVAL=24

# =============================================================================
# 邮件配置 / Email Configuration
# =============================================================================

# SMTP服务器配置 / SMTP Server Configuration
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your_smtp_password
SMTP_USE_TLS=true

# 发件人信息 / Sender Information
EMAIL_FROM_NAME=IAM Service
EMAIL_FROM_ADDRESS=noreply@yourdomain.com

# =============================================================================
# 外部服务配置 / External Service Configuration
# =============================================================================

# OAuth2提供商配置 / OAuth2 Provider Configuration (可选 / Optional)
OAUTH2_GOOGLE_CLIENT_ID=your_google_client_id
OAUTH2_GOOGLE_CLIENT_SECRET=your_google_client_secret
OAUTH2_GITHUB_CLIENT_ID=your_github_client_id  
OAUTH2_GITHUB_CLIENT_SECRET=your_github_client_secret

# LDAP配置 / LDAP Configuration (可选 / Optional)
LDAP_SERVER=ldap://ldap.example.com
LDAP_PORT=389
LDAP_BIND_DN=cn=admin,dc=example,dc=com
LDAP_BIND_PASSWORD=ldap_password
LDAP_USER_BASE_DN=ou=users,dc=example,dc=com

# =============================================================================
# 开发和调试配置 / Development & Debug Configuration
# =============================================================================

# 开发模式 / Development Mode
DEBUG=false

# API文档 / API Documentation
ENABLE_API_DOCS=true
API_DOCS_URL=/docs

# 测试模式 / Test Mode
TESTING=false

# 种子数据 / Seed Data
LOAD_SEED_DATA=true

# =============================================================================
# 云部署配置 / Cloud Deployment Configuration
# =============================================================================

# AWS配置 / AWS Configuration (如果使用AWS / If using AWS)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-west-2
AWS_S3_BUCKET=iam-service-storage

# Azure配置 / Azure Configuration (如果使用Azure / If using Azure)
AZURE_STORAGE_ACCOUNT=your_storage_account
AZURE_STORAGE_KEY=your_storage_key
AZURE_STORAGE_CONTAINER=iam-service-storage

# Google Cloud配置 / Google Cloud Configuration (如果使用GCP / If using GCP)
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_CLOUD_STORAGE_BUCKET=iam-service-storage

# =============================================================================
# 性能配置 / Performance Configuration
# =============================================================================

# 数据库连接池 / Database Connection Pool
DB_POOL_MIN_SIZE=2
DB_POOL_MAX_SIZE=20

# Redis连接池 / Redis Connection Pool  
REDIS_POOL_MIN_SIZE=2
REDIS_POOL_MAX_SIZE=20

# 工作进程配置 / Worker Process Configuration
MAX_WORKERS=4
WORKER_TIMEOUT=30

# 内存限制 / Memory Limits
MAX_MEMORY_USAGE=512M

# =============================================================================
# 高可用配置 / High Availability Configuration
# =============================================================================

# 集群配置 / Cluster Configuration
CLUSTER_MODE=false
CLUSTER_NODES=node1,node2,node3

# 负载均衡 / Load Balancing
LOAD_BALANCER_TYPE=round_robin

# 健康检查 / Health Check
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5
HEALTH_CHECK_RETRIES=3

# =============================================================================
# 合规性配置 / Compliance Configuration
# =============================================================================

# 数据保留策略 / Data Retention Policy
DATA_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years

# 隐私配置 / Privacy Configuration
ENABLE_DATA_ANONYMIZATION=true
ENABLE_RIGHT_TO_BE_FORGOTTEN=true

# 审计配置 / Audit Configuration
AUDIT_ALL_REQUESTS=true
AUDIT_FAILED_REQUESTS=true
AUDIT_ADMIN_ACTIONS=true

# =============================================================================
# 自定义配置 / Custom Configuration
# =============================================================================

# 添加你自己的自定义环境变量 / Add your own custom environment variables
CUSTOM_FEATURE_FLAG_1=false
CUSTOM_API_ENDPOINT=https://api.custom-service.com
CUSTOM_TIMEOUT=60